{% extends 'base.html' %}

{% block content %}
<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-8 text-center">
      <h1 class="mb-4">Welcome to Availability Tracker</h1>
      <p class="lead">This is your go-to app for managing work attendance and leave requests.</p>
      <h3>Attendance Summary for This Month:</h3>
      <ul>
      {% for type, count in attendance_counts.items %}
          <li>{{ type }}: {{ count }} days</li>
      {% endfor %}
      </ul>
      <!-- Canvas for Chart.js -->
      <canvas id="attendanceChart" width="400" height="400"></canvas>
    </div>
  </div>
</div>

<script type="text/javascript">
  var attendanceData = JSON.parse('{{ attendance_counts | safe }}');
  var ctx = document.getElementById('attendanceChart').getContext('2d');
  var myChart = new Chart(ctx, {
      type: 'bar',
      data: {
          labels: Object.keys(attendanceData),
          datasets: [{
              label: '# of Days',
              data: Object.values(attendanceData),
              backgroundColor: [
                  'rgba(255, 99, 132, 0.2)',
              ],
              borderColor: [
                  'rgba(255, 99, 132, 1)',
              ],
              borderWidth: 1
          }]
      },
      options: {
          scales: {
              y: {
                  beginAtZero: true
              }
          }
      }
  });
</script>
{% endblock %}
